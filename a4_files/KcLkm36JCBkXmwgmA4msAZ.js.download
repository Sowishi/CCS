;/*FB_PKG_DELIM*/

__d("MWCMInboxInfoWithSubthreads.react",["BaseMultiStepContainer.react","CometPlaceholder.react","GroupsCometChatsEngagementLogger","I64","JSResourceForInteraction","LSIntEnum","LSThreadBitOffset","MWCMThreadTypes.react","MWInboxInfo.react","MWInboxInfoPanelContext.react","MWInboxThreadMessagesSpinner.react","MWXRowItem.react","gkx","lazyLoadComponent","react","useMigrateURLParamsToRouteParams"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect,j={info:{borderStartColor:"xu1343h",borderStartStyle:"x26u7qi",borderStartWidth:"xy80clv",flexBasis:"x1yu6fn4",flexShrink:"xs83m0k",maxWidth:"x1dt7z5j",minWidth:"x2ixbly",$$css:!0},metaMessengerInfo:{backgroundColor:"xcrg951",borderTopStartRadius:"xar2s8o",borderTopEndRadius:"x170tg8w",borderBottomEndRadius:"xhh9t72",borderBottomStartRadius:"x110lsmw",borderStartWidth:"xm0m39n",marginStart:"x1s3hvo5",$$css:!0}},k=c("gkx")("386"),l=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCMSubthreadThreadView.react").__setRef("MWCMInboxInfoWithSubthreads.react")),m=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCMSubthreadListSection.react").__setRef("MWCMInboxInfoWithSubthreads.react"));function a(a){var b=a.disableInitialAutoFocus,e=a.thread;a=a.toggleSearch;var f=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),g=f.currentSubthreadView,n=f.isExpanded,o=f.setCurrentSubthreadView,p=f.setShowSubthreadList,q=f.setSubthreadKey,r=f.sourceIsSubthreadNav;f=f.subthreadKey;var s=null,t=c("useMigrateURLParamsToRouteParams")(),u=t.subthread_id,v=d("LSThreadBitOffset").has(d("LSIntEnum").ofNumber(167),e)&&d("MWCMThreadTypes.react").isJoinedCMThread(e.threadType);i(function(){typeof u==="string"&&v&&(q(d("I64").of_float(Number(u))),o("subthreadView"),d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_subthread:"1"},event:"thread_open",parent_surface:"thread_view",source:"subthread_reply_notif",surface:"thread_view",thread_id:u}))},[o,q,u,v]);n===!0&&g===null?s=h.jsx(c("MWInboxInfo.react"),{disableInitialAutoFocus:b,thread:e,toggleSearch:a}):f!=null?s=h.jsx(c("CometPlaceholder.react"),{fallback:h.jsx(c("MWInboxThreadMessagesSpinner.react"),{}),children:h.jsx(l,{isMainView:!0,onReturn:function(){q(null),o(null)},parentThreadKey:e.threadKey,threadKey:f})}):g==="subthreadList"&&(s=h.jsx(c("BaseMultiStepContainer.react"),{disableFocusContainment:!0,disableInitialAutoFocus:b,children:function(a){return h.jsx(c("CometPlaceholder.react"),{fallback:h.jsx(c("MWInboxThreadMessagesSpinner.react"),{}),children:h.jsx(m,{isMainView:!0,onReturn:function(){q(null),p(!1)},pushPage:a,sourceIsSubthreadNav:r.current,thread:e})})}}));return s==null?null:h.jsx(c("MWXRowItem.react"),{xstyle:[j.info,k?j.metaMessengerInfo:null],children:s})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWCMSubthreadlistMenuItem.react",["fbt","I64","MAWInboxInfoButton.react","MDSThreadSVGIcon.react","MWInboxInfoPanelContext.react","MWXIcon.react","SVGIcon","intlSummarizeNumber","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){a=a.subthreadCount;a=a!=null?"("+c("intlSummarizeNumber")(d("I64").to_int32(a))+")":"";a=h._("__JHASH__B36kC69TSuv__JHASH__",[h._param("subthread_count",a)]);var b=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),e=b.setShowSubthreadList;return i.jsx(c("MAWInboxInfoButton.react"),{addOnStart:i.jsx(c("MWXIcon.react"),{icon:d("SVGIcon").legacySVGIcon(function(){return i.jsx(c("MDSThreadSVGIcon.react"),{fill:"var(--primary-icon)",size:24})})}),label:a,onPress:function(){e(!0)}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSDeleteCommunityUnjoinedChannel",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(9).fetch([[[a[0]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(c.threadType,b.i64.cast([0,19]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSDeleteThenInsertCommunityUnjoinedThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(d){return c[1]=a[12]==null?b.i64.cast([0,19]):a[12],c[2]="community",b.db.table(9).fetch([[[a[0]]]]).next().then(function(d,f){var g=d.done;d=d.value;return g?b.db.table(9).put({threadKey:a[0],parentThreadKey:a[1],mailboxType:b.i64.cast([0,0]),threadType:c[1],threadName:a[2],folderName:c[2],threadPictureUrl:a[3],threadPictureUrlFallback:a[4],threadPictureUrlExpirationTimestampMs:a[5],authorityLevel:a[6],lastActivityTimestampMs:a[7],lastReadWatermarkTimestampMs:a[8],removeWatermarkTimestampMs:b.i64.cast([-1,4294967295]),ongoingCallState:b.i64.cast([0,0]),threadDescription:a[9],snippet:a[10],hasPendingInvitation:a[13],eventStartTimestampMs:a[14],eventEndTimestampMs:a[15],takedownState:a[16],cannotReplyReason:a[17],themeFbid:a[18],threadStatus:a[19],needsAdminApprovalForNewParticipant:a[20],capabilities:b.i64.cast([0,0]),capabilities2:b.i64.cast([0,0]),capabilities3:b.i64.cast([0,0])}):(f=d.item,c[3]=f.lastActivityTimestampMs,c[5]=f.parentThreadKey,c[4]=f.disappearingThreadKey,c[6]=f.isDisappearingMode,b.i64.le(f.authorityLevel,a[6])?b.i64.gt(c[3],a[7])&&b.i64.neq(c[4],e)?(b.i64.eq(a[1],b.i64.cast([-1,4294967286]))&&b.i64.eq(c[5],b.i64.cast([0,0]))?(g=[c[5],f.folderName],c[7]=g[0],c[8]=g[1],g):(d=[a[1],c[2]],c[7]=d[0],c[8]=d[1],d),b.db.table(9).put({threadKey:a[0],parentThreadKey:c[7],mailboxType:b.i64.cast([0,0]),threadType:c[1],threadName:a[2],folderName:c[8],threadPictureUrl:a[3],threadPictureUrlFallback:a[4],threadPictureUrlExpirationTimestampMs:a[5],authorityLevel:a[6],lastActivityTimestampMs:c[3],lastReadWatermarkTimestampMs:f.lastReadWatermarkTimestampMs,removeWatermarkTimestampMs:b.i64.cast([-1,4294967295]),ongoingCallState:b.i64.cast([0,0]),threadDescription:a[9],snippet:a[10],hasPendingInvitation:a[13],eventStartTimestampMs:a[14],eventEndTimestampMs:a[15],takedownState:a[16],cannotReplyReason:a[17],themeFbid:a[18],threadStatus:a[19],needsAdminApprovalForNewParticipant:a[20],capabilities:b.i64.cast([0,0]),capabilities2:b.i64.cast([0,0]),capabilities3:b.i64.cast([0,0]),disappearingThreadKey:c[4],isDisappearingMode:c[6]})):b.db.table(9).put({threadKey:a[0],parentThreadKey:a[1],mailboxType:b.i64.cast([0,0]),threadType:c[1],threadName:a[2],folderName:c[2],threadPictureUrl:a[3],threadPictureUrlFallback:a[4],threadPictureUrlExpirationTimestampMs:a[5],authorityLevel:a[6],lastActivityTimestampMs:a[7],lastReadWatermarkTimestampMs:a[8],removeWatermarkTimestampMs:b.i64.cast([-1,4294967295]),ongoingCallState:b.i64.cast([0,0]),threadDescription:a[9],snippet:a[10],hasPendingInvitation:a[13],eventStartTimestampMs:a[14],eventEndTimestampMs:a[15],takedownState:a[16],cannotReplyReason:a[17],themeFbid:a[18],threadStatus:a[19],needsAdminApprovalForNewParticipant:a[20],capabilities:b.i64.cast([0,0]),capabilities2:b.i64.cast([0,0]),capabilities3:b.i64.cast([0,0]),disappearingThreadKey:c[4],isDisappearingMode:c[6]}):b.resolve())})},function(a){return b.resolve(d)}])}b=a;f["default"]=b}),66);
__d("LSSetNeedsAdminApprovalForNewParticipant",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({needsAdminApprovalForNewParticipant:a[1]})})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSSetSecondaryParentThreadKey",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({secondaryParentThreadKey:a[1]})})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSUpdateCommunityChannelSortOrderOverride",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.resolve(c)}b=a;f["default"]=b}),66);
__d("LSUpdateThreadJoinRequestApprovalSetting",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.resolve(c)}b=a;f["default"]=b}),66);
__d("LSDeleteThenInsertCmChannelList",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.db.table(167).put({communityId:a[0],threadId:a[1],categoryId:a[2],channelPrivacy:a[3]})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);